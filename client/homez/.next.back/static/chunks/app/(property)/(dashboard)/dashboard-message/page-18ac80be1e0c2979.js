(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8370],{26722:function(e,s,a){Promise.resolve().then(a.bind(a,30444))},30444:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return g}});var t=a(57437),i=a(16022),r=a(96496),l=a(34122),n=a(79283),c=a(96163),d=a(2265),o=e=>{let{chat:s,socket:a}=e,i=(0,d.useRef)();return(0,t.jsxs)("form",{className:"d-flex align-items-center",onSubmit:e=>{e.preventDefault();let t=i.current.value;a.emit("message",s.receiver.id,t)},children:[(0,t.jsx)("input",{ref:i,className:"form-control",type:"search",placeholder:"Type a Message","aria-label":"Search",required:!0}),(0,t.jsxs)("button",{type:"submit",className:"btn ud-btn btn-thm",children:["Send Message",(0,t.jsx)("i",{className:"fal fa-arrow-right-long"})]})]})};let h=e=>{var s;let{message:a}=e,i=new Date(a.sentAt).toLocaleString();return(0,t.jsxs)("li",{className:a.own?"sent float-end":"reply float-start",children:[(0,t.jsx)("div",{className:"d-flex align-items-center ".concat(a.own?"mb15":"justify-content-end mb15"),children:(0,t.jsx)("div",{className:"title fz14 ".concat(a.own?"mr10":"ml10"),children:a.own?(0,t.jsxs)("small",{children:[i," "]}):(0,t.jsxs)(t.Fragment,{children:[null===(s=a.sender)||void 0===s?void 0:s.username," ",(0,t.jsxs)("small",{className:"ml10",children:[i," "]})]})})}),(0,t.jsx)("p",{children:a.message})]})};var m=e=>{let{messages:s}=e;return(0,t.jsx)(t.Fragment,{children:null==s?void 0:s.map((e,s)=>(0,t.jsx)(h,{message:e},s))})};let x=e=>{var s,a;let{chat:i,isActive:r}=e;return(0,t.jsx)("div",{className:"list-item",style:{borderRadius:"1rem"},children:(0,t.jsx)("a",{href:"#",children:(0,t.jsx)("div",{className:"d-flex align-items-center position-relative",children:(0,t.jsx)("div",{className:"d-sm-flex",children:(0,t.jsxs)("div",{className:"d-inline-block",style:{display:"flex",justifyContent:"space-around",width:"100%"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"fz14 fw600 mb-0",children:null==i?void 0:null===(s=i.receiver)||void 0===s?void 0:s.username}),(0,t.jsx)("div",{children:(null===(a=i.lastMessage)||void 0===a?void 0:a.message)||""})]}),(0,t.jsx)("span",{className:"m_notif",children:i.unReadedMessages})]})})})})})};var f=e=>{let{chats:s,activeChat:a}=e;return(0,t.jsx)(t.Fragment,{children:s.map((e,s)=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x,{chat:e,isActive:e.id===(null==a?void 0:a.id)},s),(0,t.jsx)("hr",{})]}))})},u=a(12391),j=a(97854),v=a(63388),g=()=>{(0,u.Z)();let[e,s]=(0,d.useState)([]),[a,h]=(0,d.useState)(),[x,g]=(0,d.useState)(),[b,N]=(0,d.useState)([]),[p,w]=(0,d.useState)(),_=(0,d.useRef)(),y=(0,j.Z)();function k(){_.current&&_.current.scrollTo({top:_.current.scrollHeight})}return(0,d.useEffect)(()=>{window&&(window.onload=k)},[window]),(0,d.useEffect)(()=>{if(_.current){let e=new MutationObserver(()=>{k()});e.observe(_.current,{childList:!0,subtree:!0})}},[a]),(0,d.useEffect)(()=>{let e=(0,v.io)("http://localhost:3000",{query:{token:localStorage.getItem("token")}});w(e),e.emit("chats"),e.on("chats",e=>{s(e),0!==e.length&&(h(e[0]),g(e[0].id))}),e.on("chat",e=>{h(e),N(e.messages)}),e.on("message",e=>{e.own=e.meta.sender===y.id,N(s=>[...s,e])})},[y.id]),(0,d.useEffect)(()=>{p&&x&&p.emit("chat",x)},[p,x]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Z,{}),(0,t.jsx)(r.default,{}),(0,t.jsx)("div",{className:"dashboard_content_wrapper",children:(0,t.jsxs)("div",{className:"dashboard dashboard_wrapper pr30 pr0-xl",children:[(0,t.jsx)(c.Z,{}),(0,t.jsxs)("div",{className:"dashboard__main pl0-md",children:[(0,t.jsxs)("div",{className:"dashboard__content bgc-f7",children:[(0,t.jsxs)("div",{className:"row pb40",children:[(0,t.jsx)("div",{className:"col-lg-12",children:(0,t.jsx)(l.Z,{})}),(0,t.jsx)("div",{className:"col-lg-12",children:(0,t.jsx)("div",{className:"dashboard_title_area",children:(0,t.jsx)("h2",{children:"Messages"})})})]}),0!==e.length?(0,t.jsxs)("div",{className:"row mb40",children:[(0,t.jsx)("div",{className:"col-lg-6 col-xl-5 col-xxl-4",children:(0,t.jsx)("div",{className:"message_container",children:(0,t.jsx)("div",{className:"inbox_user_list",children:(0,t.jsx)("div",{className:"chat-member-list pr20",children:(0,t.jsx)(f,{chats:e,activeChat:a})})})})}),(0,t.jsx)("div",{className:"col-lg-6 col-xl-7 col-xxl-8",children:(0,t.jsxs)("div",{className:"message_container mt30-md",children:[(0,t.jsx)("div",{ref:_,className:"inbox_chatting_box",children:(0,t.jsx)("ul",{className:"chatting_content",children:(0,t.jsx)(m,{messages:b})})}),(0,t.jsx)("div",{className:"mi_text",children:(0,t.jsx)("div",{className:"message_input",children:(0,t.jsx)(o,{chat:a,socket:p})})})]})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("h2",{children:"Brak czatow"})}),(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("p",{children:"By utworzyc czat wejdz na czyjs profil i kliknij przycisk Wiadomosc"})})]})]}),(0,t.jsx)(n.Z,{})]})]})})]})}},16022:function(e,s,a){"use strict";var t=a(57437),i=a(1076),r=a(92490),l=a(16691),n=a.n(l),c=a(61396),d=a.n(c);a(2265);var o=a(24033);s.Z=()=>((0,o.usePathname)(),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("header",{className:"header-nav nav-homepage-style light-header position-fixed menu-home4 main-menu",children:(0,t.jsx)("nav",{className:"posr",children:(0,t.jsx)("div",{className:"container-fluid pr30 pr15-xs pl30 posr menu_bdrt1",children:(0,t.jsxs)("div",{className:"row align-items-center justify-content-between",children:[(0,t.jsx)("div",{className:"col-6 col-lg-auto",children:(0,t.jsxs)("div",{className:"text-center text-lg-start d-flex align-items-center",children:[(0,t.jsx)("div",{className:"dashboard_header_logo position-relative me-2 me-xl-5",children:(0,t.jsx)(d(),{className:"logo",href:"/",children:(0,t.jsx)(n(),{width:238,height:44,src:"/images/header-logo2.svg",alt:"Header Logo"})})}),(0,t.jsx)("a",{className:"dashboard_sidebar_toggle_icon text-thm1 vam",href:"#","data-bs-toggle":"offcanvas","data-bs-target":"#SidebarPanel","aria-controls":"SidebarPanelLabel"})]})}),(0,t.jsx)("div",{className:"d-none d-lg-block col-lg-auto",children:(0,t.jsx)(i.Z,{})}),(0,t.jsx)("div",{className:"col-6 col-lg-auto",children:(0,t.jsx)("div",{className:"text-center text-lg-end header_right_widgets"})})]})})})}),(0,t.jsx)("div",{className:"offcanvas offcanvas-end",tabIndex:"-1",id:"SidebarPanel","aria-labelledby":"SidebarPanelLabel",children:(0,t.jsx)(r.Z,{})})]}))},34122:function(e,s,a){"use strict";var t=a(57437),i=a(61396),r=a.n(i),l=a(2265),n=a(24033);s.Z=()=>{let[e,s]=(0,l.useState)(!1),a=(0,n.usePathname)();return(0,t.jsx)("div",{className:"dashboard_navigationbar d-block d-lg-none",children:(0,t.jsxs)("div",{className:"dropdown",children:[(0,t.jsxs)("button",{className:"dropbtn",onClick:()=>s(e=>!e),children:[(0,t.jsx)("i",{className:"fa fa-bars pr10"})," Dashboard Navigation"]}),(0,t.jsx)("ul",{className:"dropdown-content ".concat(e?"show":""),children:[{title:"MAIN",items:[{href:"/dashboard-home",icon:"flaticon-discovery",text:"Dashboard"},{href:"/dashboard-message",icon:"flaticon-chat-1",text:"Message"}]},{title:"MANAGE LISTINGS",items:[{href:"/dashboard-add-property",icon:"flaticon-new-tab",text:"Add New Property"},{href:"/dashboard-my-properties",icon:"flaticon-home",text:"My Properties"},{href:"/dashboard-my-favourites",icon:"flaticon-like",text:"My Favorites"},{href:"/dashboard-saved-search",icon:"flaticon-search-2",text:"Saved Search"},{href:"/dashboard-reviews",icon:"flaticon-review",text:"Reviews"}]},{title:"MANAGE ACCOUNT",items:[{href:"/dashboard-my-package",icon:"flaticon-protection",text:"My Package"},{href:"/dashboard-my-profile",icon:"flaticon-user",text:"My Profile"},{href:"/login",icon:"flaticon-logout",text:"Logout"}]}].map((e,s)=>(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"fz15 fw400 ff-heading mt30 pl30 ".concat(0===s?"mt-0":"mt30"),children:e.title}),e.items.map((e,s)=>(0,t.jsx)("div",{className:"sidebar_list_item",children:(0,t.jsxs)(r(),{href:e.href,className:"items-center   ".concat(a==e.href?"-is-active":""," "),children:[(0,t.jsx)("i",{className:"".concat(e.icon," mr15")}),e.text]})},s))]},s))})]})})}},79283:function(e,s,a){"use strict";var t=a(57437),i=a(2265);let r=[{text:"Privacy",href:"#"},{text:"Terms",href:"#"},{text:"Sitemap",href:"#"}];s.Z=()=>{let e=new Date().getFullYear();return(0,t.jsx)("footer",{className:"dashboard_footer pt30 pb10",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"row items-center justify-content-center justify-content-md-between",children:[(0,t.jsx)("div",{className:"col-auto",children:(0,t.jsx)("div",{className:"copyright-widget",children:(0,t.jsxs)("p",{className:"text",children:["\xa9 Homez ",e," ",(0,t.jsx)("a",{href:"https://themeforest.net/user/ib-themes",target:"_blank",rel:"noopener noreferrer",children:"ib-themes"})," ","- All rights reserved"]})})}),(0,t.jsx)("div",{className:"col-auto",children:(0,t.jsx)("div",{className:"footer_bottom_right_widgets text-center text-lg-end",children:(0,t.jsx)("p",{children:r.map((e,s)=>(0,t.jsxs)(i.Fragment,{children:[(0,t.jsx)("a",{href:e.href,children:e.text}),s!==r.length-1&&" \xb7 "]},s))})})})]})})})}},96163:function(e,s,a){"use strict";var t=a(57437),i=a(61396),r=a.n(i);a(2265);var l=a(24033);s.Z=()=>{let e=(0,l.usePathname)();return(0,t.jsx)("div",{className:"dashboard__sidebar d-none d-lg-block",children:(0,t.jsx)("div",{className:"dashboard_sidebar_list",children:[{title:"MAIN",items:[{href:"/dashboard-home",icon:"flaticon-discovery",text:"Panel"},{href:"/dashboard-message",icon:"flaticon-chat-1",text:"Wiadomosci"}]},{title:"MANAGE LISTINGS",items:[{href:"/dashboard-add-property",icon:"flaticon-new-tab",text:"Dodaj oferte"},{href:"/dashboard-my-properties",icon:"flaticon-home",text:"Twoje oferty"}]},{title:"MANAGE ACCOUNT",items:[{href:"/dashboard-my-package",icon:"flaticon-protection",text:"Wykupione pakiety"},{href:"/dashboard-my-profile",icon:"flaticon-user",text:"Profil"},{href:"/login",icon:"flaticon-logout",text:"Wyloguj sie"}]}].map((s,a)=>(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"fz15 fw400 ff-heading ".concat(0===a?"mt-0":"mt30"),children:s.title}),s.items.map((s,a)=>(0,t.jsx)("div",{className:"sidebar_list_item",children:(0,t.jsxs)(r(),{href:s.href,className:"items-center   ".concat(e==s.href?"-is-active":""," "),children:[(0,t.jsx)("i",{className:"".concat(s.icon," mr15")}),s.text]})},a))]},a))})})}},12391:function(e,s,a){"use strict";var t=a(36368);let{default:i}=a(32586),{useState:r,useEffect:l}=a(2265);s.Z=function(){let{redirect:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{redirect:!0},[s,a]=r(!0),n=(0,t.Z)(e=>e.logout);return l(()=>(i.authenticated().then(a),()=>{})),l(()=>{if(s||n(),!s&&e&&window){var a,t;null===(t=window)||void 0===t||null===(a=t.location)||void 0===a||a.replace("/logowanie")}},[s]),s}},97854:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});var t=a(32586),i=a(36368),r=a(2265);function l(){let{reload:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{reload:!1},[s,a]=(0,r.useState)((0,i.Z)(e=>e.user));return e&&t.default.getProfile().then(e=>{a(e.body.user)}),s}}},function(e){e.O(0,[9805,7315,9375,5526,1633,2971,2472,1744],function(){return e(e.s=26722)}),_N_E=e.O()}]);